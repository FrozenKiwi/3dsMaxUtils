This project provides a improved development experience for plugin developers, and eases project setup, sharing, upgrading to new versions of Max.

Plugins generated by the 3ds Max Visual Studio wizard are setup for a single developer on a single machine, building against a single release of Max.  When a plugin developer creates a project, they will often need this project to be shared across machines, with other developers, and to support multiple versions of 3ds Max simultaneously.

This project was created after the frustration of updating dozens of small projects - it centralizes all management of the project build settings into a ProjectProperties file that can be used by any 3ds Max plugin.  The project comes with configurations for every versions of 3ds max from 2012 upwards, and will be updated quickly once new builds of 3ds Max are released.

Converting from Max Plugin Wizard to a Plugin
=============================================

This tutorial demonstrates converting an existing project to using the 3dsMaxUtils project properties

It assumes a project created by the VS Plugin Wizard, but the steps should work for any project.

1) If Visual Studio is open, close it

2) If your project is a Git repo, it is recommended to 3dsMaxUtils as a submodule, else download this repo to a subdirectory (named 3dsMaxutils) of the folder containing your vcxproj file

Note: While its possible to convert an exsting project file to use the 3dsMaxUtils project properties, it is generally easier to simply scrap the existing project and build a new empty one.  This is because the existing project will be filled with definitions and settings that could override the properties defined via the new props file.  For maximum benefit it's easiest to replace the existing project file with a clean one, and if necessary add any project-specific changes onto the new project file.

3) Rename the current vcxproj file to vcxproj.old (eg AwesomeMaxPlugin.vcxproj.old).  Alternatively, just delete it.

4) copy <YourProjDirectory>/3dsMaxUtils/ProjectProperties/EmptyProject.vcxproj into your current projects location

5) rename EmptyProject.vcxproj file to the original name of your project (eg AwesomeMaxPlugin.vcxproj)

The *.vcxproj.user file contains state info, is no longer relevant, and will be generated if it is not present
6) Delete *.vcxproj.user files

7) The *.def file is no longer required, and can be deleted.

The solution file will also still contain references to the configurations in the original project.  We could modify the project, renaming configurations and setting things up appropriately, but this is time consuming and unnecessary. A solution file can be automatically regenerated from a project file, and if so it will automatically contain a matching list of configurations as the configurations defined in the project file.

8) Delete *.sln file

9) Restart VS, load new project

No files are present - this is still "EmptyProject".  Any files that were built by the previous project need to be built by the new one also

In Visual Studios solution view, right click on the project -> "Add" -> "Existing Item".  
10a)Change filter to "Visual C++ Files", and select all files to import.
- or - 
10b) Select all file marked as *.cpp, *.h, and *.rc.  If the project being converted is direct from the Plugin Wizard, there should be 7 files to import: 4 named after the project, DllEntry.cpp,resource.h, and 3dsmax_preinclude.h

There is no further configuration required.  To build, simply select the configuration matching the release of Max you wish to build for, and build.  To load and debug your plugin, simply press "Debug" -> "Start Debugging".  All paths will be automatically resolved.
11) Continue as normal :)

---- Troubleshooting ----

Problem)
If you see a compiler error about missing files:
Solution)
Most likely you are trying to build a configuration for which there is no installed Max SDK.  Before developing for Max, it is still necessary to install it's SDK.  If any errors are shown relating to missing include files, ensure that the 3ds Max SDK for the configurations being built has been installed.

Problem)
Missing lib files for linking
Solution) 
Most likely you are trying to build a Win32 build on an unsupported version of Max.  There are support for Win32 builds for 3ds Max 2012 and 2013, but these builds have been discontinued since version 2014.  Ensure you are building an x64 build.

Problem)
If you see the following error message: "fatal error RC1015: cannot open include file 'afxres.h'""
Solutiuon)
This is due to the file generated by the project wizard requiring a header from the MFC library, which is not included in the free versions of Visual Studio

To resolve this, replace the 
   #include "afx.res"
with
  #include "windows.h"
and add an additional
  #define IDC_STATIC -1

Note that these lines are auto-generated by the resource compiler, and your changes can be overwritten.  To ensure that these changes are persisted, search in the .rc file for another instance of "afxres.h"

You should find something like the code demonstrated below.  Make the same change here as was made in the generated code, which should result in the following changes:

2 TEXTINCLUDE 
BEGIN
    "#include ""afxres.h""\r\n"
    "\0"
END

 ... becomes ...

2 TEXTINCLUDE 
BEGIN
    "#include ""windows.h""\r\n"
    "#define IDC_STATIC -1\r\n"
    "\0"
END
